<header class="header">
  <h2><i class="fas fa-soap"></i>Wash Management</h2>
</header>

<section class="dashboard">
  <div class="card card-total">
    <div class="icon">üìã</div>
    <div class="info">
      <div class="title">Total</div>
      <div id="sumTotal" class="number">0</div>
    </div>
  </div>
  <div class="card card-waiting">
    <div class="icon">‚è≥</div>
    <div class="info">
      <div class="title">Waiting</div>
      <div id="sumWaiting" class="number">0</div>
    </div>
  </div>
  <div class="card card-washing">
    <div class="icon">üß∫</div>
    <div class="info">
      <div class="title">Washing</div>
      <div id="sumWashing" class="number">0</div>
    </div>
  </div>
  <div class="card card-completed">
    <div class="icon">‚úÖ</div>
    <div class="info">
      <div class="title">Completed</div>
      <div id="sumCompleted" class="number">0</div>
    </div>
  </div>
  <div class="card card-rewash">
    <div class="icon">üîÅ</div>
    <div class="info">
      <div class="title">Rewash</div>
      <div id="sumRewash" class="number">0</div>
    </div>
  </div>
  <div class="card card-scrap">
    <div class="icon">üóëÔ∏è</div>
    <div class="info">
      <div class="title">Scrap</div>
      <div id="sumScrap" class="number">0</div>
    </div>
  </div>
  <div class="card card-history">
    <div class="icon">üìñ</div>
    <div class="info">
      <div class="title">History</div>
      <div id="sumHistory" class="number">0</div>
    </div>
  </div>
</section>

<section class="data-section">
  <div class="header-controls">
    <h3><i class="fas fa-tasks"></i> Current Wash Jobs</h3>

    <div class="control-table">
      <input
        type="text"
        id="searchInput"
        placeholder="üîç Search WashID / EmpID / Name"
      />
      <select id="filterStatus">
        <option value="">All Status</option>
        <option value="Waiting to Send">Waiting to Send</option>
        <option value="Washing">Washing</option>
        <option value="Completed">Completed</option>
        <option value="Waiting Rewash #1">Waiting Rewash #1</option>
        <option value="Scrap">Scrap</option>
      </select>
      <button id="btnAddWash" class="btn btn-add">‚ûï Add Wash</button>
    </div>
  </div>

  <table class="data-table">
    <thead>
      <tr>
        <th>WashID</th>
        <th>Employee</th>
        <th>UniformID</th>
        <th>Color</th>
        <th>Status</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody id="washTableBody"></tbody>
  </table>
  <div id="pagination" class="pagination"></div>
</section>

<section class="data-section">
  <div class="header-controls">
    <h3><i class="fas fa-history"></i> Wash History</h3>
    <button id="btnExportCSV" class="btn btn-export">
      <i class="fas fa-file-csv"></i> Export CSV
    </button>
  </div>

  <div id="historyTableWrapper">
    <table class="data-table">
      <thead>
        <tr>
          <th>Wash ID</th>
          <th>Uniform Code</th>
          <th>Employee</th>
          <th>ESD Result</th>
          <th>Date</th>
          <th>Status</th>
        </tr>
      </thead>
      <tbody id="historyTableBody"></tbody>
    </table>
  </div>
  <div id="historyPagination" class="pagination"></div>
</section>

<!-- Modal -->
<div id="washModal" class="modal" style="display: none">
  <div class="modal-content">
    <span id="btnCloseModal" class="close">&times;</span>
    <h3 id="modalTitle">Add/Edit Wash Job</h3>

    <label for="uniformCode">UniformID</label>
    <input type="text" id="uniformCode" placeholder="Enter Uniform Code" />

    <label for="size">Size</label>
    <input type="text" id="size" readonly />

    <label for="color">Color</label>
    <select id="color" disabled>
      <option value="">Select Uniform Code first</option>
    </select>

    <label for="empId">Employee ID</label>
    <input type="text" id="empId" readonly />

    <label for="empName">Employee Name</label>
    <input type="text" id="empName" readonly />

    <div class="modal-actions">
      <button id="btnSaveWash" class="btn btn-save">Save</button>
    </div>
  </div>
</div>

<div id="loadingOverlay" class="overlay" style="display: none">
  <div class="loader-box">
    <div class="spinner"></div>
    <p>Loading...</p>
  </div>
</div>

<div id="confirmModal" class="modal" style="display: none">
  <div class="modal-content">
    <p>‚ùì ‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà‡∏ß‡πà‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ô‡∏µ‡πâ?</p>
    <div class="modal-actions">
      <button id="btnConfirmYes" class="btn btn-delete">üóëÔ∏è ‡∏•‡∏ö‡πÄ‡∏•‡∏¢</button>
      <button id="btnConfirmNo" class="btn btn-cancel">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
    </div>
  </div>
</div>

<!-- üî¨ Modal ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö ESD -->
<div id="esdModal">
  <div class="esd-modal-content">
    <h3>üß™ ESD Testing</h3>
    <div class="esd-details">
      <p><strong>Uniform Code:</strong> <span id="esdUniformCode">-</span></p>
      <p><strong>Employee ID:</strong> <span id="esdEmpId">-</span></p>
      <p><strong>Employee Name:</strong> <span id="esdEmpName">-</span></p>
    </div>
    <div class="esd-actions">
      <button id="btnPassESD" class="btn-pass">‚úÖ Pass</button>
      <button id="btnFailESD" class="btn-fail">‚ùå Fail</button>
    </div>
  </div>
</div>

<link rel="stylesheet" href="wash.css" />
<link rel="stylesheet" href="global.css" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />

<script type="module" src="firebaseConfig.js"></script>
<script type="module" src="washUtils.js"></script>
<script type="module" src="washModel.js"></script>
<script type="module" src="washView.js"></script>
<script type="module" src="washController.js"></script>
